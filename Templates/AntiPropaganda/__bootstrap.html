<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <link rel="stylesheet" type="text/css" href="css/default.css" />

  <script type="text/javascript" src="js/jquery.js"></script>
  <script type="text/javascript">
    var oExternal = window.external;
    var oController = oExternal.oGlobal.oController;
    var oWindow = oExternal.oGlobal.oWindow(oExternal.refID);

    jQuery.fn.hideThread = function(speed) {
      this.each(function() {
        var all = $(this.parentNode).find('div.row');
        var nextSiblings = all.gt(pos = all.index(this));
        var thread = [];
  
        nextSiblings.each(function() {
          if (!$(this).is('div.grouped')) {
            return false;
          }
          thread.push(this);
        });
        var lastMsg = thread.length ? thread[thread.length - 1] : this;
        if (all.length && lastMsg == all[all.length - 1]) {
          oWindow.breakGrouping();
        }
        $(thread).hide(speed);
        return $(this).hide(speed);
      });
    };

    $(document).ready(function() {
      try {
        // do sth

      } catch(e) {
        insertString('<b>Exception</b> (<b>' + e.name + '</b>): ' + e.message);
      }
    });

    function insertString(string) {
      $('#container').append(string).evalScripts();
    }

    addMessage = insertString;
    addStatus = insertString;
  </script>
</head>
<body>
  <div id="container"></div>
</body>
</html>